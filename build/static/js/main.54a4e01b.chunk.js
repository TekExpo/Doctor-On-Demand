(this.webpackJsonpacs_calling_sample=this.webpackJsonpacs_calling_sample||[]).push([[0],{181:function(e,t,a){e.exports=a.p+"static/media/hero.4acf60cc.svg"},209:function(e,t,a){e.exports=a(343)},214:function(e,t,a){},341:function(e){e.exports=JSON.parse('{"name":"acs_calling_sample","version":"0.3.0","private":true,"description":"This is a sample application to show how the ACS Calling Web SDK can be used to build a group calling experience. The client-side application is a React based user interface which uses Redux for handling complex state while leveraging Microsoft Fluent UI for how things look. Powering this front-end is a C# web application powered by ASP.net Core to connect this application with Azure.","dependencies":{"@azure/communication-calling":"1.0.0-beta.1","@azure/communication-common":"1.0.0-beta.1","@fluentui/react":"^7.117.1","@fluentui/react-icons-northstar":"^0.51.0","@fluentui/react-northstar":"^0.51.0","@types/preval.macro":"^3.0.0","@types/react":"^16.9.49","@types/react-dom":"^16.9.8","@types/react-redux":"^7.1.9","@types/uuid":"^8.3.0","bootstrap":"^4.1.3","jquery":"^3.5.1","merge":"^1.2.1","oidc-client":"^1.9.0","preval.macro":"^5.0.0","react":"^16.8.0","react-dom":"^16.8.0","react-redux":"^7.2.0","react-router-bootstrap":"^0.25.0","react-router-dom":"^5.1.2","react-scripts":"^3.4.3","reactstrap":"^8.4.1","redux":"^4.0.5","redux-thunk":"^2.3.0","rimraf":"^2.6.2","source-map-explorer":"^2.5.0","uuid":"^8.1.0"},"devDependencies":{"ajv":"^6.9.1","cross-env":"^5.2.0","typescript":"^3.7.5","eslint":"^6.8.0","eslint-config-react-app":"^5.2.0","eslint-plugin-flowtype":"^4.6.0","eslint-plugin-import":"^2.20.1","eslint-plugin-jsx-a11y":"^6.2.3","eslint-plugin-react":"^7.18.3","nan":"^2.14.1","prettier":"2.0.5"},"eslintConfig":{"extends":"react-app"},"scripts":{"analyze":"source-map-explorer \'build/static/js/*.js\'","start":"rimraf ./build && react-scripts start","build":"react-scripts build","test":"cross-env CI=true react-scripts test --env=jsdom","eject":"react-scripts eject","prettier":"prettier --write --config .prettierrc **/*.js **/*.ts","prettier:check":"prettier --check --config .prettierrc **/*.js **/*.ts","lint":"eslint */**/*.{ts,tsx} && echo Lint completed.","lint:quiet":"eslint */**/*.{ts,tsx} --quiet && echo Lint completed."},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},343:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),c=a(55),o=a.n(c),l=(a(214),a(19)),s=a(30),d=a(404),m=a(414),u=a(411),p=a(179),h=a(416),f=a(22),v=a(412),g=a(386),b=a(387),S=a(388),E=a(389),O=a(390),I=a(391),D=a(392),j=a(4),C=Object(j.y)().palette,w=Object(j.D)({height:"3.75rem",padding:"0 0.8125rem",display:"inline-block",borderRadius:7,overflow:"hidden"}),y=Object(j.D)({backgroundColor:C.white,width:"2rem",height:"3.75rem",border:"0.125rem",borderRadius:2,marginRight:"0.4375rem",color:C.neutralSecondary}),x=Object(j.D)(y,{color:C.neutralLight}),N=Object(j.D)({backgroundColor:"#d74654",width:"6.5625rem",height:"2.1875rem",border:"0.125rem",marginRight:"0.75rem",marginLeft:"0.75rem",borderRadius:2,color:C.white,selectors:{":focus":{color:C.white},":hover":{color:C.white},":active":{color:C.white}}}),A=Object(j.D)({color:C.white,padding:"0.3125rem",fontSize:"0.875rem",lineHeight:"3.75rem"}),k=Object(j.D)({width:"100%"}),L=function(e){var t="Denied"!==e.cameraPermission&&e.cameraActive,a="Denied"===e.cameraPermission,n="Denied"!==e.cameraPermission?e.onCameraChange:void 0,i="Denied"!==e.microphonePermission&&e.micActive,c="Denied"===e.microphonePermission,o="Denied"!==e.microphonePermission?e.onMicChange:void 0,l=!!e.activeScreenShareStream;return r.createElement(d.a,{className:w},r.createElement(v.a,{onKeyDownCapture:function(t){13===t.keyCode&&e.localVideoRendererIsBusy&&t.preventDefault()},disabled:a,onClick:n,className:y},r.createElement("div",{className:k},t?r.createElement(g.a,{size:"medium"}):r.createElement(b.a,{size:"medium"}))),r.createElement(v.a,{onClick:o,disabled:c,className:y},r.createElement("div",{className:k},i?r.createElement(S.a,{size:"medium"}):r.createElement(E.a,{size:"medium"}))),e.isLocalScreenShareSupportedInBrowser()&&r.createElement(v.a,{disabled:l,onClick:e.onScreenShareChange,className:l?x:y},r.createElement("div",{className:k},e.screenShareActive?r.createElement(O.a,{size:"medium"}):r.createElement(I.a,{size:"medium"}))),r.createElement(v.a,{onClick:e.onEndCallClick,className:e.compressedMode?y:N},r.createElement("div",{className:k},r.createElement(D.a,{size:"medium"}),!e.compressedMode&&r.createElement("span",{className:A},"Leave"))))},R=a(402),P={childrenGap:"1.5rem"},_={childrenGap:"0.75rem"},V={caretDownWrapper:{height:"2.5rem",lineHeight:"2.5rem"},dropdownItem:{fontWeight:600,fontSize:"0.875rem",height:"2.5rem"},dropdown:{height:"2.5rem"},title:{fontWeight:600,fontSize:"0.875rem",height:"2.5rem",lineHeight:"2.3125rem"},label:{fontWeight:600,fontSize:"0.875rem"}},T=Object(j.D)({width:"100%",maxWidth:"18.75rem",minWidth:"12.5rem",maxHeight:"14.125rem",marginTop:"2.125rem"}),M=function(e){var t=function(e){return e.map((function(e){return{val:e,key:e.id,text:""===e.name?e.deviceType:e.name}}))};return i.a.createElement(d.a,{className:T,tokens:P},i.a.createElement(R.a,{placeholder:"Select an option",label:"Camera",options:t(e.videoDeviceList),styles:V,disabled:0===e.videoDeviceList.length,defaultSelectedKey:e.videoDeviceInfo?e.videoDeviceInfo.id:"",onChange:function(){var t,a=null!==(t=arguments.length<=2?void 0:arguments[2])&&void 0!==t?t:0;e.setVideoDeviceInfo(e.videoDeviceList[a])}}),i.a.createElement(d.a,{tokens:_},i.a.createElement(R.a,{placeholder:"Select an option",label:"Microphone",styles:V,disabled:0===e.audioDeviceList.length,options:t(e.audioDeviceList),defaultSelectedKey:e.audioDeviceInfo?e.audioDeviceInfo.id:"",onChange:function(){var t,a=null!==(t=arguments.length<=2?void 0:arguments[2])&&void 0!==t?t:0;e.setAudioDeviceInfo(e.audioDeviceList[a])}})))},z=a(45),W=a(5),F=a.n(W),G=a(16),H=a(405),U=a(393),B={getAppServiceUrl:function(){return window.location.origin},getTokenForUser:function(){var e=Object(G.a)(F.a.mark((function e(t){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/getUserToken?userId=".concat(encodeURIComponent(t)));case 2:if(!(a=e.sent).ok){e.next=5;break}return e.abrupt("return",a.json());case 5:throw new Error("Invalid token response");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isSelectedAudioDeviceInList:function(e,t){return t.filter((function(t){return t.name===e.name})).length>0},isSelectedVideoDeviceInList:function(e,t){return t.filter((function(t){return t.name===e.name})).length>0},isMobileSession:function(){return!!window.navigator.userAgent.match(/(iPad|iPhone|iPod|Android|webOS|BlackBerry|Windows Phone)/g)},isSmallScreen:function(){return window.innerWidth<700||window.innerHeight<400},getId:function(e){return Object(U.b)(e)?e.communicationUserId:Object(U.a)(e)?e.callingApplicationId:Object(U.c)(e)?e.phoneNumber:e.id},getStreamId:function(e,t){var a=t.id;return"".concat(e,"-").concat(a,"-").concat(t.type)},isOnIphoneAndNotSafari:function(){var e=navigator.userAgent;return!(!e.includes("iPhone")||!e.includes("FxiOS")&&!e.includes("CriOS"))},getBuildTime:function(){return"9/25/2020, 15:58:09"}},K=function(e){return{type:"SET_CALL_AGENT",callAgent:e}},Y=function(e){return{type:"CALL_ADDED",call:e}},q=function(e,t){return{type:"CALL_REMOVED",call:void 0,incomingCallEndReason:e.isIncoming?e.callEndReason:void 0,groupCallEndReason:!e.isIncoming&&t?e.callEndReason:void 0}},J=function(e){return{type:"SET_CALL_STATE",callState:e}},Q=function(e){return{type:"SET_PARTICIPANTS",remoteParticipants:e}},X=function(e){return{type:"SET_MIC",mic:e}},Z=function(e){return{type:"SET_SHARE_SCREEN",shareScreen:e}},$=function(e){return{type:"SET_DEVICE_MANAGER",deviceManager:e}},ee=function(e){return{type:"SET_MICROPHONE_PERMISSION",microphonePermission:e}},te=function(e){return{type:"SET_CAMERA_PERMISSION",cameraPermission:e}},ae=function(e){return{type:"SET_AUDIO_DEVICE_INFO",audioDeviceInfo:e}},ne=function(e){return{type:"SET_VIDEO_DEVICE_INFO",videoDeviceInfo:e}},re=function(e){return{type:"SET_AUDIO_DEVICE_LIST",audioDeviceList:e}},ie=function(e){return{type:"SET_VIDEO_DEVICE_LIST",videoDeviceList:e}},ce=function(e){return{type:"SET_LOCAL_STREAM",localVideoStream:e}},oe=function(e,t){return{type:"ADD_SCREENSHARE_STREAM",stream:e,user:t}},le=function(e){return function(){var t=Object(G.a)(F.a.mark((function t(a,n){var r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(r=n())&&void 0!==r.calls.call){t.next=4;break}return console.error("state or state.controls.mic is null"),t.abrupt("return");case 4:if(t.prev=4,r.controls.mic){t.next=10;break}return t.next=8,r.calls.call.unmute();case 8:t.next=12;break;case 10:return t.next=12,r.calls.call.mute();case 12:a(X(e)),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),console.error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[4,15]])})));return function(e,a){return t.apply(this,arguments)}}()},se=function(){var e=Object(G.a)(F.a.mark((function e(t,a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hangUp(a).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),de=function(){var e=Object(G.a)(F.a.mark((function e(t,a,n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.join(a,n);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log("Failed to join a call",e.t0),e.abrupt("return");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a,n){return e.apply(this,arguments)}}(),me=function(){var e=Object(G.a)(F.a.mark((function e(t,a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.removeParticipant(a).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ue=function(e,t,a,n){var r=B.getId(e.identifier);e.on("participantStateChanged",(function(){console.log("participant stateChanged",r,e.state),a(Q(Object(z.a)(t.remoteParticipants.values())))})),e.on("isSpeakingChanged",(function(){a(Q(Object(z.a)(t.remoteParticipants.values())))})),e.on("videoStreamsUpdated",(function(t){t.added.forEach((function(t){"Video"!==t.type&&(t.on("availabilityChanged",(function(){t.isAvailable?a(oe(t,e)):a({type:"REMOVE_SCREENSHARE_STREAM",stream:t,user:e})})),t.isAvailable&&a(oe(t,e)))}))}))},pe=function(){var e=Object(G.a)(F.a.mark((function e(t,a,n){var r,i;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMicrophoneList();case 2:r=e.sent,a(re(r)),void 0===(i=n()).devices.audioDeviceInfo&&r.length>0?(a(ae(r[0])),t.setMicrophone(r[0])):i.devices.audioDeviceInfo&&!B.isSelectedAudioDeviceInList(i.devices.audioDeviceInfo,r)&&t.setMicrophone(i.devices.audioDeviceInfo);case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),he=function(){var e=Object(G.a)(F.a.mark((function e(t,a,n){var r,i;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.getCameraList(),a(ie(r)),void 0===(i=n()).devices.videoDeviceInfo?a(ne(r[0])):i.devices.videoDeviceInfo&&!B.isSelectedVideoDeviceInList(i.devices.videoDeviceInfo,r)&&a(ne(i.devices.videoDeviceInfo));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),fe=function(){var e=Object(G.a)(F.a.mark((function e(t,a,n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on("permissionStateChanged",Object(G.a)(F.a.mark((function e(){var n,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPermissionState("Camera");case 2:return n=e.sent,a(te(n)),e.next=6,t.getPermissionState("Microphone");case 6:r=e.sent,a(ee(r));case 8:case"end":return e.stop()}}),e)})))),t.on("videoDevicesUpdated",Object(G.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:he(t,a,n);case 1:case"end":return e.stop()}}),e)})))),t.on("audioDevicesUpdated",Object(G.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pe(t,a,n);case 1:case"end":return e.stop()}}),e)})))),t.askDevicePermission(!0,!0).then((function(e){void 0!==e.audio&&(e.audio?(a(ee("Granted")),pe(t,a,n)):a(ee("Denied"))),void 0!==e.video&&(e.video?(a(te("Granted")),he(t,a,n)):a(te("Denied")))}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ve=a(401),ge=a(2),be=a(169),Se=a(422),Ee=a(415),Oe={root:{minWidth:0,padding:"0 0.25rem",alignSelf:"stretch",height:"auto",width:"12.5rem"},primaryText:{color:"#000000"}},Ie={root:{minWidth:0,padding:"0 0.25rem",alignSelf:"stretch",height:"auto"}},De=Object(j.D)({maxHeight:"21.875rem",overflow:"auto",paddingLeft:"1.125rem",paddingRight:"1.125rem"}),je=Object(j.D)({margin:"0.4375rem",fontSize:"1rem"}),Ce={childrenGap:"0.625rem",padding:"0.625rem"},we=function(e){return r.createElement(r.Fragment,null,r.createElement(ve.a,{text:e.name,styles:Oe,size:ge.c.size32,presence:"Connected"===e.state?ge.b.online:ge.b.offline}),e.isScreenSharing&&r.createElement(be.a,{className:je,iconName:"ScreenCast"}))},ye=function(e){return r.createElement(Se.a,{role:"menuitem",title:"More options",styles:Ie,menuIconProps:{iconName:"More"},menuProps:{items:e}})},xe=Object(s.b)((function(e){return{userId:e.sdk.userId,call:e.calls.call,callState:e.calls.callState,remoteParticipants:e.calls.remoteParticipants,screenShareStreams:e.streams.screenShareStreams,removeParticipant:function(t){e.calls.call&&t&&me(e.calls.call,t)}}}))((function(e){var t=e.screenShareStreams&&1===e.screenShareStreams.length,a=e.screenShareStreams[0],n=e.remoteParticipants.map((function(e){var n,r=!!t&&a.user===e;return{key:B.getId(e.identifier),name:null!==(n=e.displayName)&&void 0!==n?n:B.getId(e.identifier),participant:e,state:e.state,isScreenSharing:r}}));return n.push({key:"".concat(e.userId," (You)"),name:"".concat(e.userId," (You)"),participant:void 0,state:"Connected",isScreenSharing:!!t&&B.getId(a.user.identifier)===e.userId}),r.createElement(d.a,{className:De,tokens:Ce},function(e,t){return e.map((function(e,t){return r.createElement(Ee.a,{key:t,items:[e],role:"menubar",vertical:!1,onRenderOverflowButton:ye,onRenderItem:we})}))}(n,e.removeParticipant))})),Ne=a(410),Ae=a(395),ke=a(413),Le=Object(j.y)().palette,Re={root:{height:"100%"}},Pe={root:{marginBottom:"1.25rem"}},_e={childrenGap:"0.3125rem"},Ve={field:{color:Le.neutralSecondary,padding:0},root:{marginLeft:"1rem",marginRight:"1rem"},fieldGroup:{border:"none"}},Te=Object(j.D)({height:"4.3125rem"}),Me=Object(j.D)({fontSize:"1.375rem",fontWeight:600,width:"69px",float:"left",margin:"20px"}),ze=Object(j.D)({fontWeight:600,fontSize:"1rem",marginLeft:"1rem",marginRight:"1rem"}),We=Object(j.D)({fontWeight:600,fontSize:"0.875rem",height:"2.5rem",marginLeft:"1rem",marginRight:"1rem",width:"90%"}),Fe=Object(j.D)({marginRight:"0.5em"}),Ge=Object(j.D)({marginLeft:"1.25rem",width:"15.375rem"});!function(e){e.None="none",e.People="People",e.Settings="Settings"}(n||(n={}));var He=function(){document.getElementById("inputText").select(),document.execCommand("copy")},Ue=function(e){return i.a.createElement(d.a,{styles:Re},i.a.createElement(d.a.Item,{className:Te},i.a.createElement("div",{className:Me},e.selectedPane)),i.a.createElement(d.a.Item,{styles:Re},e.selectedPane===n.People&&i.a.createElement(d.a,{verticalAlign:"space-between",styles:Re},i.a.createElement(xe,null),i.a.createElement(d.a,{styles:Pe,tokens:_e},i.a.createElement(h.a,null),i.a.createElement("div",{className:ze},"Invite people to join"),i.a.createElement(Ne.a,{styles:Ve,id:"inputText",type:"text",value:"".concat(document.baseURI)}),i.a.createElement(Ae.a,{className:We,onClick:He},i.a.createElement(ke.a,{iconName:"Copy",className:Fe}),"Copy join info"))),e.selectedPane===n.Settings&&i.a.createElement("div",{className:Ge},i.a.createElement(M,{videoDeviceList:e.videoDeviceList,audioDeviceList:e.audioDeviceList,audioDeviceInfo:e.audioDeviceInfo,videoDeviceInfo:e.videoDeviceInfo,setVideoDeviceInfo:e.setVideoDeviceInfo,setAudioDeviceInfo:e.setAudioDeviceInfo}))))},Be=a(396),Ke=a(397),Ye=Object(j.y)().palette,qe={linkIsSelected:{padding:0,marginRight:0,height:"100%",color:Ye.themePrimary,selectors:{":hover":{color:Ye.themePrimary}}},link:{padding:0,marginRight:0,height:"3.75rem"},root:{width:"5.25rem",height:"3.75rem",display:"inline-block",verticalAlign:"top"}},Je=(Object(j.D)({display:"inline-block"}),Object(j.D)({width:"100%",height:"3.875rem",padding:"0.0625rem 0",boxShadow:"rgba(0, 0, 0, 0.133) 0px 1.6px 3.6px 0px, rgba(0, 0, 0, 0.11) 0px 0.3px 0.9px 0px",overflow:"hidden",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",marginBottom:2})),Qe=Object(j.D)(Je,{justifyContent:"center"}),Xe=Object(j.D)({display:"inline-block",padding:"0 1rem",height:"1.875rem"}),Ze=Object(j.D)({padding:"0 0.8125rem"}),$e={root:{color:Ye.neutralLight,width:"0.0625rem"}},et=a(43),tt=function e(){Object(et.a)(this,e)};tt.INCOMING="Incoming",tt.RINGING="Ringing",tt.CONNECTING="Connecting",tt.CONNECTED="Connected",tt.DEFAULT_IMG_WIDTH=200,tt.CROP_MEDIA="Crop",tt.CONFIGURATION_LOCAL_VIDEO_PREVIEW_ID="ConfigurationLocalVideoPreview",tt.LOCAL_VIDEO_PREVIEW_ID="LocalVideoPreview";var at,nt=Object(s.b)((function(e,t){return{actionable:e.calls.callState===tt.INCOMING||e.calls.callState===tt.RINGING||e.calls.callState===tt.CONNECTING||e.calls.callState===tt.CONNECTED,localVideoStream:e.streams.localVideoStream,mic:e.controls.mic,call:e.calls.call,shareScreen:e.controls.shareScreen,endCall:function(){e.calls.call&&se(e.calls.call,{forEveryone:!1}),t.endCallHandler()},videoDeviceInfo:e.devices.videoDeviceInfo,screenWidth:t.screenWidth,screenShareStreams:e.streams.screenShareStreams,localVideoRendererIsBusy:e.streams.localVideoRendererIsBusy,cameraPermission:e.devices.cameraPermission,microphonePermission:e.devices.microphonePermission}}),(function(e){return{setLocalVideoStream:function(t){return e(ce(t))},setMic:function(t){return e(le(t))},setScreenShare:function(t){return e((a=t,function(){var e=Object(G.a)(F.a.mark((function e(t,n){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=n())&&void 0!==r.calls.call){e.next=4;break}return console.error("state or state.controls.shareScreen is null"),e.abrupt("return");case 4:if(e.prev=4,r.controls.shareScreen){e.next=10;break}return e.next=8,r.calls.call.startScreenSharing();case 8:e.next=12;break;case 10:return e.next=12,r.calls.call.stopScreenSharing();case 12:t(Z(a)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t,a){return e.apply(this,arguments)}}()));var a},isLocalScreenShareSupportedInBrowser:function(){return!B.isMobileSession()&&(/chrome/i.test(navigator.userAgent.toLowerCase())||/safari/i.test(navigator.userAgent.toLowerCase()))}}}))((function(e){var t,a=function(){if(e.localVideoStream)e.call.stopVideo(e.localVideoStream),e.setLocalVideoStream(void 0);else if(e.videoDeviceInfo){var t=new f.LocalVideoStream(e.videoDeviceInfo);e.setLocalVideoStream(t),e.call.startVideo(t)}};return Object(r.useEffect)((function(){e.call&&0===e.call.localVideoStreams.length&&e.localVideoStream&&e.call.startVideo(e.localVideoStream)}),[e.call,e.localVideoStream]),i.a.createElement(d.a,{id:"header",className:e.screenWidth>360?Je:Qe},i.a.createElement(u.a,{onKeyDownCapture:function(e){e.target.id===n.People&&39===e.keyCode&&e.preventDefault()},getTabId:function(e){return e},onLinkClick:function(t){var a,r;t&&(t.props.itemKey===n.Settings&&(a=e.selectedPane,r=e.setSelectedPane,a!==n.Settings?r(n.Settings):r(n.None)),t.props.itemKey===n.People&&function(e,t){e!==n.People?t(n.People):t(n.None)}(e.selectedPane,e.setSelectedPane))},styles:qe,initialSelectedKey:n.None,selectedKey:e.selectedPane},i.a.createElement(p.a,{itemKey:n.Settings,onRenderItemLink:function(){return i.a.createElement(Be.a,{outline:e.selectedPane!==n.Settings,size:"medium",className:Ze})}}),i.a.createElement(p.a,{itemKey:n.People,onRenderItemLink:function(){return i.a.createElement(Ke.a,{outline:e.selectedPane!==n.People,size:"medium",className:Ze})}}),i.a.createElement(p.a,{itemKey:n.None})),e.screenWidth>360&&i.a.createElement("div",{className:Xe},i.a.createElement(h.a,{styles:$e,vertical:!0})),i.a.createElement(L,{micActive:e.mic,onMicChange:function(){e.setMic(!e.mic)},cameraActive:void 0!==e.localVideoStream,onCameraChange:a,screenShareActive:e.shareScreen,activeScreenShareStream:null!==(t=e.screenShareStreams[0])&&void 0!==t?t:void 0,onScreenShareChange:function(){e.setScreenShare(!e.shareScreen)},onEndCallClick:function(){e.localVideo&&a(),e.endCall()},cameraPermission:e.cameraPermission,microphonePermission:e.microphonePermission,localVideoRendererIsBusy:e.localVideoRendererIsBusy,compressedMode:e.screenWidth<=360,isLocalScreenShareSupportedInBrowser:e.isLocalScreenShareSupportedInBrowser}))})),rt=Object(j.y)().palette,it=Object(j.D)({padding:"0.4375rem",display:"flex",alignItems:"center",justifyContent:"center",border:0,borderRight:"1px solid rgba(0,0,0,0.05)",borderBottom:"1px solid rgba(0,0,0,0.05)"}),ct=Object(j.D)({height:"100%",background:rt.neutralLighterAlt,display:"grid"}),ot=a(13),lt=a(94),st=Object(j.y)().palette,dt=Object(j.D)({backgroundColor:st.neutralSecondary,bottom:"5%",height:"1.75rem",boxShadow:"0 0 1px 0 rgba(0,0,0,.16)",color:st.neutralLighter,fontSize:"1.25rem",lineHeight:"1.0625rem",textAlign:"left",left:"2%",overflow:"hidden",position:"absolute",padding:"0.25rem",whiteSpace:"nowrap",maxWidth:"40%",borderRadius:4}),mt=Object(j.D)({position:"relative",height:"100%",width:"100%",background:"transparent"}),ut=Object(j.D)(mt,{width:"100%",height:"100%",transform:"rotateY(180deg)"}),pt=a(58),ht=a.n(pt),ft=function(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),n=a[0],c=a[1],o={src:ht.a.toString(),imageFit:ot.b.contain,maximizeFrame:!0};return Object(r.useEffect)((function(){var t;return Object(G.a)(F.a.mark((function a(){var n,r;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.stream){a.next=9;break}return n=new f.Renderer(e.stream),a.next=4,n.createView({scalingMode:"Crop"});case 4:t=a.sent,(r=document.getElementById(tt.LOCAL_VIDEO_PREVIEW_ID))&&0===r.childElementCount&&(r.appendChild(t.target),c(!0)),a.next=10;break;case 9:c(!1);case 10:case"end":return a.stop()}}),a)})))(),function(){t&&(t.dispose(),c(!1))}}),[e.stream]),i.a.createElement("div",{className:mt},i.a.createElement("div",{style:{display:n?"block":"none"},className:ut,id:tt.LOCAL_VIDEO_PREVIEW_ID}),i.a.createElement(lt.a,Object.assign({style:{display:n?"none":"block"}},o)),i.a.createElement(m.a,{className:dt},e.label))},vt=function(e){var t,a=e.stream?B.getStreamId(e.label,e.stream):"".concat(e.label," - no stream"),n=Object(r.useState)(!1),c=Object(l.a)(n,2),o=c[0],s=c[1],d={src:ht.a.toString(),imageFit:ot.b.contain,maximizeFrame:!0},u=e.stream;return Object(r.useEffect)((function(){if(u){var n=function(){var n=Object(G.a)(F.a.mark((function n(){var r,i;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((r=document.getElementById(a))&&e.stream&&e.stream.isAvailable)){n.next=10;break}return s(!0),i=new f.Renderer(e.stream),n.next=6,i.createView({scalingMode:"Crop"});case 6:t=n.sent,r&&0===r.childElementCount&&r.appendChild(t.target),n.next=12;break;case 10:s(!1),t&&t.dispose();case 12:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();u.on("availabilityChanged",n),u.isAvailable&&n()}}),[u]),i.a.createElement("div",{className:mt},i.a.createElement("div",{style:{display:o?"block":"none"},className:mt,id:a}),i.a.createElement(lt.a,Object.assign({style:{display:o?"none":"block"}},d)),i.a.createElement(m.a,{className:dt},e.label))},gt=Object(s.b)((function(e){return{userId:e.sdk.userId,remoteParticipants:e.calls.remoteParticipants,localVideoStream:e.streams.localVideoStream}}))((function(e){var t=Object(r.useState)(1),a=Object(l.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)(1),s=Object(l.a)(o,2),d=s[0],m=s[1],u=i.a.useCallback((function(e,t){return Math.ceil((e.length+1)/t)}),[]),p=i.a.useCallback((function(e){return e&&e.length>0?Math.ceil(Math.sqrt(e.length+1)):1}),[])(e.remoteParticipants);p!==n&&c(p);var h=u(e.remoteParticipants,n);return h!==d&&m(h),i.a.createElement("div",{className:ct,style:{gridTemplateRows:"repeat(".concat(d,", minmax(0, 1fr))"),gridTemplateColumns:"repeat(".concat(n,", 1fr)")}},function(t,a){var n=t.map((function(e){var t;return i.a.createElement("div",{className:it},i.a.createElement(vt,{key:B.getId(e.identifier),stream:e.videoStreams[0],label:null!==(t=e.displayName)&&void 0!==t?t:B.getId(e.identifier)}))})),r=i.a.createElement("div",{key:a,className:it},i.a.createElement(ft,{label:a,stream:e.localVideoStream}));return n.unshift(r),n}(e.remoteParticipants,e.userId))})),bt=Object(j.y)().palette,St=Object(j.D)({padding:"0.5em",borderRight:"1px solid rgba(0,0,0,0.05)",height:"100%",width:"100%",background:bt.neutralLighterAlt}),Et=Object(j.D)({display:"none",borderRight:"1px solid rgba(0,0,0,0.05)",height:"100%",width:"100%",background:bt.neutralLighterAlt}),Ot=Object(j.D)({height:"100%",display:"flex",justifyContent:"center"}),It=a(417),Dt=a(36),jt=function(e){var t,a=Object(r.useState)(!0),n=Object(l.a)(a,2),c=n[0],o=n[1],s=e.activeScreenShareStream;Object(r.useEffect)((function(){var e;(function(){var t=Object(G.a)(F.a.mark((function t(){var a,n,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s||!s.stream){t.next=10;break}return a=s.stream,n=new f.Renderer(a),t.next=5,n.createView({scalingMode:"Fit"});case 5:e=t.sent,(r=document.getElementById("fullScreenStreamMediaId"))&&0===r.childElementCount&&(o(!1),r.appendChild(e.target)),t.next=11;break;case 10:e&&e.dispose();case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[s]);var d=null!==(t=e.activeScreenShareStream.user.displayName)&&void 0!==t?t:B.getId(e.activeScreenShareStream.user.identifier);return i.a.createElement(i.a.Fragment,null,c&&i.a.createElement("div",{className:Ot},i.a.createElement(It.a,{label:"Loading ".concat(d,"'s screen"),size:Dt.a.xSmall})),i.a.createElement("div",{id:"fullScreenStreamMediaId",className:c?Et:St}))},Ct=Object(j.y)().palette,wt={root:{width:"100%"}},yt={root:{height:"100%",minHeight:"9.375rem",width:"100%"}},xt={root:{width:"17.875rem"}},Nt={root:{border:"solid 1px ".concat(Ct.neutralLighterAlt),height:"100%",display:"none"}},At={root:{border:"solid 1px ".concat(Ct.neutralLighterAlt),height:"calc(100% - 3px)",display:"initial"}},kt=Object(j.D)({height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}),Lt=Object(s.b)((function(e,t){return{userId:e.sdk.userId||t.userId,callAgent:e.calls.callAgent,group:e.calls.group,screenWidth:t.screenWidth,call:e.calls.call,shareScreen:e.controls.shareScreen,mic:e.controls.mic,groupCallEndReason:e.calls.groupCallEndReason,isGroup:function(){return e.calls.call&&!e.calls.call.isIncoming&&!!e.calls.group},joinGroup:function(){e.calls.callAgent&&de(e.calls.callAgent,{groupId:e.calls.group},{audioOptions:{muted:!e.controls.mic}})},remoteParticipants:e.calls.remoteParticipants,streams:e.streams.streams,callState:e.calls.callState,localVideo:e.controls.localVideo,localVideoStream:e.streams.localVideoStream,screenShareStreams:e.streams.screenShareStreams,videoDeviceInfo:e.devices.videoDeviceInfo,audioDeviceInfo:e.devices.audioDeviceInfo,videoDeviceList:e.devices.videoDeviceList,audioDeviceList:e.devices.audioDeviceList,cameraPermission:e.devices.cameraPermission,microphonePermission:e.devices.microphonePermission}}),(function(e){return{mute:function(){return e(le(!1))},setAudioDeviceInfo:function(t){return e(ae(t))},setVideoDeviceInfo:function(t){e(ne(t))},setLocalVideoStream:function(t){return e(ce(t))}}}))((function(e){var t=Object(r.useState)(n.None),a=Object(l.a)(t,2),c=a[0],o=a[1],s=e.screenShareStreams&&1===e.screenShareStreams.length,u=e.callAgent,p=e.call,h=e.groupId,f=e.joinGroup;return Object(r.useEffect)((function(){u&&!p&&(f(),document.title="".concat(h," group call sample"))}),[u,p,h,f]),i.a.createElement(d.a,{horizontalAlign:"center",verticalAlign:"center",styles:yt},i.a.createElement(d.a.Item,{styles:wt},i.a.createElement(nt,{selectedPane:c,setSelectedPane:o,endCallHandler:e.endCallHandler,screenWidth:e.screenWidth})),i.a.createElement(d.a.Item,{styles:yt},e.shareScreen?i.a.createElement("div",{className:kt},i.a.createElement(m.a,null,"Your screen is being shared")):e.callState===tt.CONNECTED&&i.a.createElement(d.a,{horizontal:!0,styles:yt},i.a.createElement(d.a.Item,{grow:!0,styles:s?At:Nt},s&&i.a.createElement(jt,{activeScreenShareStream:e.screenShareStreams[0]})),i.a.createElement(d.a.Item,{grow:!0,styles:s?Nt:At},i.a.createElement(gt,null)),c!==n.None&&i.a.createElement(d.a.Item,{disableShrink:!0,styles:xt},i.a.createElement(Ue,Object.assign({},e,{selectedPane:c,setSelectedPane:o}))))))})),Rt=a(52),Pt=a(8),_t={deviceManager:void 0,audioDeviceInfo:void 0,videoDeviceInfo:void 0,audioDeviceList:[],videoDeviceList:[],cameraPermission:void 0,microphonePermission:void 0},Vt={localVideoRendererIsBusy:!1,localVideoStream:void 0,streams:[],screenShareStreams:[]},Tt={mic:!1,localVideo:!1,shareScreen:!1},Mt={callAgent:void 0,call:void 0,callState:"None",incomingCallEndReason:void 0,groupCallEndReason:void 0,remoteParticipants:[],group:""},zt=Object(Rt.c)({calls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CALL_AGENT":return Object(Pt.a)(Object(Pt.a)({},e),{},{callAgent:t.callAgent});case"CALL_ADDED":return Object(Pt.a)(Object(Pt.a)({},e),{},{call:t.call});case"CALL_REMOVED":return Object(Pt.a)(Object(Pt.a)({},e),{},{call:void 0,remoteParticipants:[],incomingCallEndReason:t.incomingCallEndReason,groupCallEndReason:t.groupCallEndReason});case"SET_CALL_STATE":return Object(Pt.a)(Object(Pt.a)({},e),{},{callState:t.callState});case"SET_PARTICIPANTS":return Object(Pt.a)(Object(Pt.a)({},e),{},{remoteParticipants:t.remoteParticipants});case"SET_GROUP":return Object(Pt.a)(Object(Pt.a)({},e),{},{group:t.group});default:return e}},devices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DEVICE_MANAGER":return Object(Pt.a)(Object(Pt.a)({},e),{},{deviceManager:t.deviceManager});case"SET_VIDEO_DEVICE_INFO":return Object(Pt.a)(Object(Pt.a)({},e),{},{videoDeviceInfo:t.videoDeviceInfo});case"SET_AUDIO_DEVICE_INFO":return Object(Pt.a)(Object(Pt.a)({},e),{},{audioDeviceInfo:t.audioDeviceInfo});case"SET_VIDEO_DEVICE_LIST":return Object(Pt.a)(Object(Pt.a)({},e),{},{videoDeviceList:t.videoDeviceList});case"SET_AUDIO_DEVICE_LIST":return Object(Pt.a)(Object(Pt.a)({},e),{},{audioDeviceList:t.audioDeviceList});case"SET_CAMERA_PERMISSION":return Object(Pt.a)(Object(Pt.a)({},e),{},{cameraPermission:t.cameraPermission});case"SET_MICROPHONE_PERMISSION":return Object(Pt.a)(Object(Pt.a)({},e),{},{microphonePermission:t.microphonePermission});default:return e}},streams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEO_DEVICE_INFO":return e.localVideoStream&&t.videoDeviceInfo?Object(Pt.a)(Object(Pt.a)({},e),{},{localVideoStream:new f.LocalVideoStream(t.videoDeviceInfo)}):e;case"SET_LOCAL_STREAM":return Object(Pt.a)(Object(Pt.a)({},e),{},{localVideoStream:t.localVideoStream});case"ADD_SCREENSHARE_STREAM":var a={stream:t.stream,user:t.user};return Object(Pt.a)(Object(Pt.a)({},e),{},{screenShareStreams:[].concat(Object(z.a)(e.screenShareStreams),[a])});case"REMOVE_SCREENSHARE_STREAM":var n=e.screenShareStreams.filter((function(e){return e.stream!==t.stream&&e.user!==t.user}));return Object(Pt.a)(Object(Pt.a)({},e),{},{screenShareStreams:n});case"RESET_STREAMS":return Vt;default:return e}},controls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MIC":return Object(Pt.a)(Object(Pt.a)({},e),{},{mic:t.mic});case"SET_SHARE_SCREEN":return Object(Pt.a)(Object(Pt.a)({},e),{},{shareScreen:t.shareScreen});case"RESET_CONTROLS":return Tt;default:return e}},sdk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERID":return Object(Pt.a)(Object(Pt.a)({},e),{},{userId:t.userId});default:return e}}}),Wt=a(180),Ft=a(190),Gt=a(398),Ht={childrenGap:"0.25rem"},Ut={childrenGap:"0.75rem"},Bt={childrenGap:"1.5rem"},Kt=Object(j.D)({width:"20.625rem"}),Yt=Object(j.D)({fontSize:"1.375rem",fontWeight:600}),qt=Object(j.D)({fontWeight:600,height:"2.5rem",width:"9.875rem",fontSize:"0.875rem",padding:0}),Jt=Object(j.D)({marginRight:"0.375rem",fontSize:"1.375rem"}),Qt=Object(j.D)({color:"rgb(0,0,0)",fontSize:"0.875 rem"}),Xt=function(e){return i.a.createElement(d.a,{verticalAlign:"center",tokens:Ht,className:Kt},i.a.createElement(d.a,{tokens:Bt},i.a.createElement("div",{className:Yt},"You left the call"),i.a.createElement(d.a,{horizontal:!0,tokens:Ut},i.a.createElement(Ae.a,{className:qt,onClick:e.rejoinHandler},i.a.createElement(Gt.a,{className:Jt,size:"medium"}),"Rejoin call"),i.a.createElement(Ft.a,{className:qt,onClick:e.homeHandler},"Go to homepage")),i.a.createElement("div",{className:Qt},i.a.createElement("a",{href:"https://github.com/Azure/Communication/issues"},"Give Feedback"),"\xa0on this sample app on Github")))},Zt=a(181),$t=a.n(Zt),ea=Object(j.y)().palette,ta=Object(j.D)({width:"27.25rem",height:"20.125rem",selectors:{"@media (max-width: 67.1875rem)":{display:"none"}}}),aa={childrenGap:"3.4375rem"},na={childrenGap:"2.625rem"},ra={childrenGap:"0.75rem"},ia=Object(j.D)({listStyleType:"none",fontSize:"0.875rem"}),ca=Object(j.D)({marginRight:"0.4375rem",color:ea.themePrimary}),oa=Object(j.D)({fontWeight:600,fontSize:"2.25rem",maxWidth:"23.188rem"}),la=Object(j.D)({marginRight:"0.375rem",fontSize:"1.375rem"}),sa=Object(j.D)({fontWeight:600,fontSize:"0.875rem",width:"7.75rem",height:"2.5rem",borderRadius:3,padding:"0.625rem"}),da=Object(j.D)({selectors:{"@media (max-width: 53.4375rem)":{padding:"0.625rem"}}}),ma={image:{height:"100%",width:"100%"},root:{}},ua=function(e){var t="SkypeCircleCheck",a={src:$t.a.toString()},n=["Customize with your web stack","Connect with users with seamless collaboration across web","High quality, low latency capabilities for an uninterrupted calling experience","Learn about this"];return i.a.createElement(d.a,{horizontal:!0,horizontalAlign:"center",verticalAlign:"center",tokens:aa},i.a.createElement(d.a,{className:da,tokens:na},i.a.createElement("div",{className:oa},"Exceptionally simple video calling"),i.a.createElement(d.a,{tokens:ra,className:ia},i.a.createElement("li",null,i.a.createElement(ke.a,{className:ca,iconName:t})," ",n[0]),i.a.createElement("li",null,i.a.createElement(ke.a,{className:ca,iconName:t})," ",n[1]),i.a.createElement("li",null,i.a.createElement(ke.a,{className:ca,iconName:t})," ",n[2]),i.a.createElement("li",null,i.a.createElement(ke.a,{className:ca,iconName:t})," ",n[3]," ",i.a.createElement("a",{href:"https://aka.ms/ACS-CallingSample"},"sample"))),i.a.createElement(Ae.a,{className:sa,onClick:e.startCallHandler},i.a.createElement(Gt.a,{className:la,size:"medium"}),"Start a call")),i.a.createElement(lt.a,Object.assign({alt:"Welcome to the ACS Calling sample app",className:ta,styles:ma},a)))},pa=a(418),ha=Object(j.y)().palette,fa={root:{marginBottom:0}},va={root:{width:"10rem",height:"10.5rem"}},ga={childrenGap:"0.625rem",padding:"0.625rem"},ba=Object(j.D)({maxWidth:"25rem",minWidth:"12.5rem",width:"100%",height:"100%",maxHeight:"18.75rem",minHeight:"12.5rem",background:ha.neutralLighter,color:ha.neutralPrimaryAlt}),Sa=Object(j.D)({height:"2.8125rem",width:"100%",backgroundColor:ha.neutralQuaternaryAlt}),Ea=Object(j.D)({width:"100%",height:"100%",maxHeight:"15.9375rem",transform:"rotateY(180deg)"}),Oa=function(e){var t={src:ht.a.toString(),imageFit:ot.b.cover,maximizeFrame:!0};return Object(r.useEffect)((function(){return Object(G.a)(F.a.mark((function t(){var a,n;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.localVideoStream){t.next=7;break}return a=new f.Renderer(e.localVideoStream),t.next=4,a.createView({scalingMode:"Crop"});case 4:at=t.sent,(n=document.getElementById(tt.CONFIGURATION_LOCAL_VIDEO_PREVIEW_ID))&&0===n.childElementCount&&n.appendChild(at.target);case 7:case"end":return t.stop()}}),t)})))(),function(){at&&at.dispose()}}),[e.localVideoStream]),i.a.createElement(d.a,{className:ba},i.a.createElement(d.a,{horizontalAlign:"center",verticalAlign:"center",id:tt.CONFIGURATION_LOCAL_VIDEO_PREVIEW_ID,className:Ea},!e.localVideoStream&&i.a.createElement(lt.a,Object.assign({styles:va},t))),i.a.createElement(d.a,{horizontal:!0,horizontalAlign:"center",verticalAlign:"center",tokens:ga,className:Sa},i.a.createElement(g.a,{size:"medium"}),i.a.createElement(pa.a,{onKeyDownCapture:function(e){},styles:fa,disabled:!e.videoDeviceInfo,onChange:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new f.LocalVideoStream(e.videoDeviceInfo);e.setLocalVideoStream(a?n:void 0)}}),i.a.createElement(S.a,{size:"medium"}),i.a.createElement(pa.a,{styles:fa,disabled:!e.audioDeviceInfo,onChange:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.setMic(a)}})))},Ia={childrenGap:"3rem"},Da=Object(j.D)({marginRight:"0.375rem",fontSize:"1.375rem"}),ja=Object(j.D)({fontWeight:600,fontSize:"0.875rem",height:"2.75rem",width:"100%",marginTop:"2.125rem",maxWidth:"18.75rem",minWidth:"12.5rem"}),Ca=Object(j.D)({maxWidth:"46.875rem",width:"100%",height:"100%",selectors:{"@media (max-width: 750px)":{padding:"0.625rem",height:"100%"}}}),wa=Object(j.D)({width:"100%",maxWidth:"18.75rem"}),ya=Object(j.D)({height:"100%",width:"100%"}),xa=Object(j.D)({height:"100%",width:"100%",justifyContent:"space-evenly"}),Na=(Object(j.D)({minWidth:"12.5rem"}),Object(j.D)({boxSizing:"border-box",height:"2.5rem",width:"18.75rem",border:"0.125rem solid #CCCCCC",borderRadius:"0.188rem",backgroundColor:"#FFFFFF"})),Aa=Object(j.D)({fontSize:"0.875rem",lineHeight:"1.5rem"}),ka=Object(j.D)({boxSizing:"border-box",height:"2.5rem",width:"18.75rem",border:"0.125rem solid #e81123",borderRadius:"0.188rem",backgroundColor:"#FFFFFF",fontSize:"0.875rem"}),La=Object(j.D)({fontSize:"0.875rem",fontWeight:600,color:"rgb(50, 49, 48)",boxSizing:"border-box",boxShadow:"none",margin:0,display:"inline-block",padding:"5px 0px",overflowWrap:"break-word"}),Ra=Object(j.D)({width:"18.75rem",backgroundColor:"#FFFFFF",marginTop:"0.188rem",marginBottom:"0.188rem",marginLeft:"0.188rem",color:"#e81123",fontSize:".7375rem",fontWeight:"400"}),Pa={root:{height:"auto"}},_a=function(e){return i.a.createElement("div",null,i.a.createElement("div",{className:La},"Name"),i.a.createElement(Ne.a,{autoComplete:"off",inputClassName:Aa,ariaLabel:"Choose your name",borderless:!0,className:e.isEmpty?ka:Na,onChange:function(t){e.setName(t.target.value),t.target.value?e.setEmptyWarning(!1):e.setEmptyWarning(!0)},id:"name",placeholder:"Enter your name",defaultValue:e.name,styles:Pa}),e.isEmpty&&i.a.createElement("div",{role:"alert",className:Ra}," ","Name cannot be empty"," "))},Va=Object(s.b)((function(e,t){return{deviceManager:e.devices.deviceManager,callAgent:e.calls.callAgent,userId:e.sdk.userId||t.userId,group:e.calls.group,mic:e.controls.mic,screenWidth:t.screenWidth,localVideoStream:e.streams.localVideoStream,audioDeviceInfo:e.devices.audioDeviceInfo,videoDeviceInfo:e.devices.videoDeviceInfo,videoDeviceList:e.devices.videoDeviceList,audioDeviceList:e.devices.audioDeviceList,cameraPermission:e.devices.cameraPermission,microphonePermission:e.devices.microphonePermission}}),(function(e){return{setLocalVideoStream:function(t){return e(ce(t))},setMic:function(t){return e(X(t))},setAudioDeviceInfo:function(t){return e(ae(t))},setVideoDeviceInfo:function(t){return e(ne(t))},initCallClient:function(t,a,n){return e(function(e,t,a){return function(){var a=Object(G.a)(F.a.mark((function a(n,r){var i,c,o,l,s,d,m;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,B.getTokenForUser(e);case 3:if(i=a.sent,c={},o=i.value.token,!B.isOnIphoneAndNotSafari()){a.next=9;break}return t(),a.abrupt("return");case 9:a.prev=9,l=new f.CallClient(c),a.next=17;break;case 13:return a.prev=13,a.t0=a.catch(9),t(),a.abrupt("return");case 17:if(l){a.next=19;break}return a.abrupt("return");case 19:return s=new H.a(o),a.next=22,l.createCallAgent(s);case 22:if(void 0!==(d=a.sent)){a.next=25;break}return a.abrupt("return");case 25:return d.updateDisplayName(e),a.next=28,l.getDeviceManager();case 28:m=a.sent,n($(m)),n(K(d)),fe(m,n,r),d.on("callsUpdated",(function(e){e.added.forEach((function(e){if(r().calls.call&&e.isIncoming)e.reject();else{n(Y(e)),e.on("callStateChanged",(function(){n(J(e.state))})),e.on("isScreenSharingOnChanged",(function(){n(Z(e.isScreenSharingOn))})),e.on("remoteParticipantsUpdated",(function(t){t.added.forEach((function(t){console.log("participantAdded",t),ue(t,e,n,r),n(Q(Object(z.a)(e.remoteParticipants.values())))})),t.removed.length>0&&(console.log("participantRemoved"),n(Q(Object(z.a)(e.remoteParticipants.values()))))}));var t=Object(z.a)(e.remoteParticipants.values());t.forEach((function(t){return ue(t,e,n,r)})),n(Q(t)),n(J(e.state))}})),e.removed.forEach((function(e){console.log("callRemoved",e);var t=r();t.calls.call&&t.calls.call===e&&(n(q(e,t.calls.group)),n({type:"RESET_CONTROLS"}),n({type:"RESET_STREAMS"}))}))})),a.next=38;break;case 35:a.prev=35,a.t1=a.catch(0),console.error(a.t1);case 38:case"end":return a.stop()}}),a,null,[[0,35],[9,13]])})));return function(e,t){return a.apply(this,arguments)}}()}(t,a))},setUserId:function(t){return e(function(e){return{type:"SET_USERID",userId:e}}(t))},setGroup:function(t){return e(function(e){return{type:"SET_GROUP",group:e}}(t))},updateDevices:function(){return e(function(){var e=Object(G.a)(F.a.mark((function e(t,a){var n,r,i,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a(),null!=(r=n.devices.deviceManager)){e.next=5;break}return console.error("no device manager available"),e.abrupt("return");case 5:return e.next=7,r.getCameraList();case 7:return i=e.sent,t(ie(i)),e.next=11,r.getMicrophoneList();case 11:c=e.sent,t(re(c));case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}}}))((function(e){var t=Object(r.useState)(e.userId),a=Object(l.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)(!1),s=Object(l.a)(o,2),m=s[0],u=s[1],p=e.userId,h=e.groupId,f=e.setUserId,v=e.initCallClient,g=e.setGroup,b=e.unsupportedStateHandler,S=e.endCallHandler;return Object(r.useEffect)((function(){f(p),v(p,b,S),g(h)}),[p,h,f,v,g,b,S]),i.a.createElement(d.a,{className:Ca,horizontalAlign:"center",verticalAlign:"center"},e.deviceManager?i.a.createElement(d.a,{className:e.screenWidth>750?ya:xa,horizontal:e.screenWidth>750,horizontalAlign:"center",verticalAlign:"center",tokens:e.screenWidth>750?Ia:void 0},i.a.createElement(Oa,{setMic:e.setMic,setLocalVideoStream:e.setLocalVideoStream,videoDeviceInfo:e.videoDeviceInfo,audioDeviceInfo:e.audioDeviceInfo,localVideoStream:e.localVideoStream}),i.a.createElement(d.a,{className:wa},i.a.createElement(_a,{setName:c,name:n,setEmptyWarning:u,isEmpty:m}),i.a.createElement("div",null,i.a.createElement(M,{videoDeviceList:e.videoDeviceList,audioDeviceList:e.audioDeviceList,audioDeviceInfo:e.audioDeviceInfo,videoDeviceInfo:e.videoDeviceInfo,setVideoDeviceInfo:e.setVideoDeviceInfo,setAudioDeviceInfo:e.setAudioDeviceInfo})),i.a.createElement("div",null,i.a.createElement(Ae.a,{className:ja,onClick:function(){n?(u(!1),e.setUserId(n),e.callAgent.updateDisplayName(n),e.startCallHandler()):u(!0)}},i.a.createElement(Gt.a,{className:Da,size:"medium"}),"Start call")))):i.a.createElement(It.a,{label:"Initializing call client...",ariaLive:"assertive",labelPosition:"top"}))})),Ta=a(408),Ma=a(400),za=a(341).dependencies["@azure/communication-calling"],Wa="Last Updated ".concat(B.getBuildTime()," with @azure/communication-calling:").concat(za);Object(j.B)({}),Object(Ma.a)();var Fa=Object(Rt.d)(zt,Object(Rt.a)(Wt.a));window.setTimeout((function(){try{console.log("ACS sample group calling app: ".concat(Wa))}catch(e){}}),0);var Ga=function(){var e=Object(r.useState)("home"),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(""),o=Object(l.a)(c,2),d=o[0],m=o[1],u=Object(r.useState)(0),p=Object(l.a)(u,2),h=p[0],f=p[1];Object(r.useEffect)((function(){var e=function(){var e="undefined"!==typeof window?window.innerWidth:0;f(e)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var v=function(){return"user"+Math.ceil(1e3*Math.random())},g=function(){return new URLSearchParams(window.location.search).get("groupId")},b=function(){if(d)return d;var e=g(),t=null==e||""===e?Object(Ta.a)():e;return console.log("The group id is "+t),m(t),t};return g()&&"home"===a&&n("configuration"),(B.isMobileSession()||B.isSmallScreen())&&console.log("ACS Calling sample: This is experimental behaviour"),i.a.createElement(s.a,{store:Fa},"home"===a?i.a.createElement(ua,{startCallHandler:function(){window.history.pushState({},document.title,window.location.href+"?groupId="+b())}}):"configuration"===a?i.a.createElement(Va,{startCallHandler:function(){return n("call")},unsupportedStateHandler:function(){return n("error")},endCallHandler:function(){return n("endCall")},groupId:b(),userId:v(),screenWidth:h}):"call"===a?i.a.createElement(Lt,{endCallHandler:function(){return n("endCall")},groupId:b(),userId:v(),screenWidth:h}):"endCall"===a?i.a.createElement(Xt,{rejoinHandler:function(){n("call")},homeHandler:function(){window.location.href=window.location.href.split("?")[0]}}):(window.document.title="Unsupported browser",i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{href:"https://aka.ms/ACS-CallingSupport#calling-client-library-browser-support"},"Learn more"),"\xa0about browsers and platforms supported by the web calling sdk")))},Ha=a(399),Ua=a(182),Ba=a(187),Ka=a(188),Ya={componentStyles:{SvgIcon:Ua.a},componentVariables:{SvgIcon:Ba.a},siteVariables:Ka};o.a.render(i.a.createElement(Ha.a,{theme:Ya,className:"wrapper"},i.a.createElement(Ga,null)),document.getElementById("root"))},58:function(e,t,a){e.exports=a.p+"static/media/staticmedia.19456955.svg"}},[[209,1,2]]]);
//# sourceMappingURL=main.54a4e01b.chunk.js.map